# Wacomタブレットを使えるようにする
まず、以下のサイトに行き、必要なソースをダウンロードします。

* [The Linux Wacom Project](https://linuxwacom.github.io/)

カーネルドライバー (Kernel Driver) というリンクからGithubのサイトに飛びます。
![The Linux Wacom Project トップページ](images/Linux/linux-wacom-tablet-project-site-top.png)

GithubのWikiページに飛ぶので、Codeタブを開きます。
![The Linux Wacom Project Wikiページ](images/Linux/linux-wacom-tablet-project-github-01.png)

GithubのCodeページからReleaseタブを開きます。
![The Linux Wacom Project Codeページ](images/Linux/linux-wacom-tablet-project-github-02.png)

GithubのReleaseページに飛んだら下にスクロールします。
![The Linux Wacom Project Codeページ](images/Linux/linux-wacom-tablet-project-github-03.png)

GithubのReleaseをスクロールし、「input-wacom-XXXX.tar.bz2」(XXXXは最新の数字) をクリックしてドライバーのソースをダウンロードします。
![The Linux Wacom Project Codeページ](images/Linux/linux-wacom-tablet-project-github-04.png)

ソースをダウンロードしたら、以下の手順で解凍、ビルド、インストールを行います。(バージョンが0.43.0の場合)
```ターミナル
プロンプト$ tar -xf input-wacom-input-wacom-0.43.0.tar.gz [Enter]
プロンプト$ cd input-wacom-input-wacom-0.43.0 [Enter]
プロンプト$ ./autogen.sh prefix=/usr libdir=/lib64 [Enter]
autoreconf: Entering directory `.'
autoreconf: configure.ac: not using Gettext
autoreconf: running: aclocal 
aclocal: warning: couldn't open directory 'm4': No such file or directory
autoreconf: configure.ac: tracing
autoreconf: configure.ac: not using Libtool
autoreconf: running: /usr/bin/autoconf
autoreconf: running: /usr/bin/autoheader
autoreconf: running: automake --add-missing --copy --no-force
autoreconf: Leaving directory `.'
checking for a BSD-compatible install... /bin/ginstall -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether to enable maintainer-specific portions of Makefiles... yes
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking whether gcc understands -c and -o together... yes
checking for style of include used by make... GNU
checking dependency style of gcc... none
checking for kernel type... Linux
checking for linux-based kernel... yes
checking for kernel source/headers... /lib/modules/4.9.182/source
checking kernel version... 4.9.182
checking RHEL6 minor release... 0
checking RHEL7 minor release... 0
checking power supply version... v4.1+
checking abs accessor version... v2.6.36+
checking CONFIG\_MODULE\_SIG... 
checking CONFIG\_MODULE\_SIG\_FORCE... 
checking CONFIG\_LOCK\_DOWN\_KERNEL... 
checking CONFIG\_LOCK\_DOWN\_IN\_EFI\_SECURE\_BOOT... 
checking secure boot state... off
checking if modules must be signed... no
checking CONFIG\_MODULE\_SIG\_HASH... 
checking for module signing hash algorithm... sha512
checking for kernel autogenerated key at /lib/modules/4.9.182/source/... no
checking for kernel autogenerated cert at /lib/modules/4.9.182/source/certs/signing\_key.x509... no
checking for shim MOK key at /var/lib/shim-signed/mok/MOK.priv... no
checking for shim MOK cert at /var/lib/shim-signed/mok/MOK.der... no
checking for rEFInd MOK key at /etc/refind.d/keys/refind\\_local.key... no
checking for rEFInd MOK cert at /etc/refind.d/keys/refind\\_local.cer... no
checking for module signing key... 
checking for module signing certificate... 

checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating 2.6.32/Makefile
config.status: creating 2.6.38/Makefile
config.status: creating 3.7/Makefile
config.status: creating 3.17/Makefile
config.status: creating 4.5/Makefile
config.status: creating config.h
config.status: executing depfiles commands
configure:
----------------------------------------
  BUILD ENVIRONMENT:
       linux kernel - yes 4.5
      kernel source - yes /lib/modules/4.9.182/source

NOTE: The kernel drivers included in this package are only tested with the
X Wacom driver built from xf86-input-wacom. If you are running an X server
version older than 1.7, please use the drivers provided by the linuxwacom
package.

Please run 'make && make install'.
プロンプト$ make [Enter]
```
このようにビルドし、終わったらドライバーを移動します。

まず稼働中のカーネルのバージョンを`[uname](article.php?entry=linux/commands/03_operatingsystem/002) -r`コマンドで確認します。
```ターミナル
プロンプト$ uname -r [Enter]
4.9.182
```
カーネルのバージョンは`4.9.182`だと分かります。

次に上の`./autogen.sh`の出力の最後にある
```ターミナルの出力
  BUILD ENVIRONMENT:
       linux kernel - yes 4.5
      kernel source - yes /lib/modules/4.9.182/source
```
という部分を見ます。
`linux kernel`が`4.5`とあるので、`4.5`フォルダの中にある`wacom.ko`を`kernel source`のある`/lib/modules/4.9.182`の中の`kernel/drivers/input/tablet`に移動します。
```ターミナル
プロンプト$ ls [Enter]
2.6.32  **4.5**        Makefile     README.md       compile      config.status    inputattach  stamp-h1
2.6.38  AUTHORS    Makefile.am  aclocal.m4      config.h     configure        install-sh
3.17    COPYING    Makefile.in  autogen.sh      config.h.in  configure.ac     missing
3.7     ChangeLog  NEWS         autom4te.cache  config.log   git-version-gen  release.sh
プロンプト$ cd 4.5 [Enter]
プロンプト$ ls [Enter]
Makefile        built-in.o     **wacom.ko**     wacom.o      wacom\_w8001.c      wacom\_w8001.mod.o  wacom\_wac.h
Makefile.in     modules.order  wacom.mod.c  wacom\_sys.c  wacom\_w8001.ko     wacom\_w8001.o      wacom\_wac.o
Module.symvers  wacom.h        wacom.mod.o  wacom\_sys.o  wacom\_w8001.mod.c  wacom\_wac.c
プロンプト$ **cp wacom.ko /lib/modules/4.9.182/kernel/drivers/input/tablet** [Enter]
```
目立たせるために太字にして色を付けています。

ドライバの配置が終わったら次は`[modprobe](article.php?entry=linux/commands/03_operatingsystem/015)`コマンドと`[insmod](article.php?entry=linux/commands/03_operatingsystem/016)`コマンドでモジュールのインストールを行います。
```ターミナル
プロンプト$ modprobe -r wacom [Enter]
プロンプト$ insmod /lib/modules/4.9.182/kernel/drivers/input/tablet/wacom.ko [Enter]
```
タブレットを接続します。下の写真の機種は「Wacom Intuos CTL-6100WL」です。割と新しいモデルです。
![ペンタブレットをPCに繋げたところ](images/Linux/connect-tablet-to-pc.jpg)
ペンで画面上のカーソルを動かせるようになっているはずです。これで完了です。

