# 宣言と定義 (C、C++)
CやJavaでは変数を使う為にまず定義をしないといけません。

## 宣言とは
宣言とは、プログラム内で使う予定の変数の名前と保持する値の型、そして初期値をコンパイラに指示することで、宣言する文を宣言文と言います。
Cの場合
: int a = 1;
上の文により、`int`型の変数`a`を初期値`1`で使うことをコンパイラに伝えます。

## 定義とは
定義というのは変数のためのメモリ領域を確保することをコンパイラに指示することです。
例えば
: int a = 1;
上の文は宣言文ですが、ローカル変数 (またはグローバル変数) の`a`のためのメモリ領域を確保するようにコンパイラに指示しているので定義文でもあります。この領域はスタックに確保されます。

## 定義と宣言の使い分け
一般的に定義と宣言は同じ意味の言葉です。
しかし厳密に言えば、C、C++の場合、`extern`修飾子を用いて宣言された変数は定義されていない状態ということになります。

: extern int a;

上の文はプログラム内のどこかで`int`型の変数`a`を定義して使う予定であることをコンパイラに伝える宣言文です。
定義文ではありません。


## 定義と宣言の実用例 (C言語)
主に複数ファイルで共通して使うグローバル変数がある時、ヘッダーファイルに記述されるのが上記`extern`付きの宣言文です。
その場合、そのグローバル変数の定義はそのヘッダーファイルに対応するソースファイルにて行われます。

### 例
例えば下のようなヘッダーファイルがあるとします。
```example.h
extern int global_int;
```

下は上のヘッダーファイルの対応するソースファイルの例です。
```example.c
int global_int;
```

上のヘッダーファイルを使用したソースファイルの例です
```main.c
#include "example.h"

void main() {
    global_int = 100;
}
```

次にこれを`gcc`でコンパイルします。
```ターミナル
プロンプト$ gcc -o main main.c example.c [Enter]
```

### 解説
こうするとまずプリプロセスというフェーズで`example.h`と`main.c`が合成されます。すると`main.c`の中にグローバル変数`global_int`の宣言があることになります。
次に`main.c`と`example.c`が別々にコンパイルされて`main.o`と`example.o`というオブジェクトファイルが作られ、それがリンクというフェーズで合成される際、main.oで宣言されている変数`global_int`の定義が`example.o`の中にあることを確認して、あれば無事にリンクされてひとつのプログラムとして完成します。
なかった場合はリンクエラーというエラーになりコンパイルに失敗します。
それは`main.o`で使われる`global_int`のためのメモリがどこにも確保されないからです。

実際にこのようなことを考慮する必要があるのはCとC++だけで、Javaなどの他の言語では定義と宣言は完全に一致しています。

