# シェルスクリプトを書く
<div class="outline"></div>
## シェルスクリプトとは
コマンドはシェルから実行するのが基本ですが、ファイルにコマンドを書いておいてそれをシェルから実行させることもできます。そういったファイルを**シェルスクリプト**と言います。
シェルスクリプトファイルは普通のテキストファイルです。
スクリプトとはスクリプト言語が記述されたテキストファイルのことです。
スクリプト言語とはテキストとして記述されたソースを別のプログラムが読み込んで実行する形式のプログラミング言語です。BashやPerl、Python、Rubyなどのことです。シェルスクリプトを実行するのはBashなどのシェルです。

## 簡単なスクリプトの例
### スクリプトのソース
「こんにちは」というメッセージを出力するシェルスクリプトは以下のようになります。
```こんにちは.sh
#!/bin/bash

echo "こんにちは"
```
### Shebang (シバン) について
一行目に「shebang (シバン)」と呼ばれる記述があり、それが実行するシェルプログラムのパスを指定します。
: #!/bin/bash
上の例では`/bin/bash`というシェルを指定してスクリプトを起動することを指示しています。
しかしBashの場合、これは別になくても動きますが。一応慣例としてつけるのが普通です。

### 実行のしかた
シェルスクリプトを実行するには、
* シェルの引数としてシェルスクリプトファイルを指定する方法
* シェルスクリプトに実行権限を与えてシェルスクリプト自体を実行する方法
があります。
#### シェルの引数としてシェルスクリプトファイルを指定する方法
: bash シェルスクリプト.sh
上の例では`bash`の引数として「シェルスクリプト.sh」というファイルを渡しています。そうするとこのファイルの中に書かれたコマンドが上から順に実行されます。
#### シェルスクリプトに実行権限を与えてシェルスクリプト自体を実行する方法
まず、`chmod`コマンドでシェルスクリプトに実行権限を与えます。
: chmod +x シェルスクリプト.sh

現在の作業ディレクトリにあるシェルスクリプトを実行するには
: ./シェルスクリプト.sh
とします。

ひとつ上の階層にあるシェルスクリプトを実行するには、
: ../シェルスクリプト.sh
とします。

環境変数`PATH`に設定されたディレクトリにあるシェルスクリプトは名前だけで実行できます。
: シェルスクリプト.sh

## シェルスクリプトの書き方
シェルスクリプトはシェルで実行できるコマンドを全てそのまま記述することができます。
## シェルスクリプトの引数
シェルスクリプトは引数を渡して実行することができます。
その場合、シェルスクリプトの中で引数として使われる特別な変数がいくつかあります。
### $0、$1、$2、…
数字の名前の変数はシェルスクリプトの引数を最初のものから数えた順番になっています。
`$0`はシェルスクリプト自身の名前で、`$1`以降がシェルスクリプトに渡された引数です。
例えば`test.sh`というシェルスクリプトに`a`、`b`、`c`という3つの引数を渡して実行する場合、
: ./test.sh a b c
のように実行し、シェルスクリプトの中では
* $0 → test.sh
* $1 → a
* $2 → b
* $3 → c
ということになります。
### $#
`$#`は引数の数を表わす変数です。
## 実行したコマンドを確認する (-x オプション)
スクリプト中でどんなコマンドが実行されたか確認したい場合は、`bash`コマンドに`-x`オプションを付けて実行します。
そうやって実行すると、実行されたコマンドが出力されます。
```test.sh
#!/bin/bash

echo こんにちは!
echo 2行目です。
echo 3行目です。
```
上のスクリプトを`bash`で`-x`オプションを付けて実行すると、
```ターミナル
プロンプト$ bash -x test.sh
+ echo 'こんにちは!'
こんにちは!
+ echo 2行目です。
2行目です。
+ echo 3行目です。
3行目です。
```
このようになり、`+`で始まる行ではスクリプトが実行したコマンドが分かります。

